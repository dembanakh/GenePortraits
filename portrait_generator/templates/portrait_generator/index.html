{% load static %}
{% load myfilters %}

<link rel="stylesheet" type="text/css" href="{% static 'portrait_generator/index.css' %}">

<div class="container">
<form action="/generator/result/" enctype="multipart/form-data" method="post">
    {% csrf_token %}
    <h1>Frequency Portrait Generator</h1>
    <div class="form-group">
        {{ form.gene_load_method.errors }}
        {{ form.gene_load_method }}
        {{ form.gene_load_method.label_tag | addclass:'control-label' }}
        <i class="bar"></i>
    </div>
    <table>
        {{ form.as_table }}
    </table>
    <input type="submit" value="Generate">
</form>
</div>

<script type="text/javascript">
    var select = document.getElementById("id_gene_load_method");
    var methods = {"R": 0, "F": 1, "U": 2};
    var fields = Array.from(document.getElementsByTagName("tr")).slice(1, 4);
    var lastValue = select.value;

    window.addEventListener("pageshow", () => {
        select.value = "R";
        for (var field of fields) {
            field.hidden = true;
        }
        fields[methods[lastValue]].hidden = false;
    });

    select.addEventListener("change", () => {
        fields[methods[lastValue]].hidden = true;
        fields[methods[select.value]].hidden = false;
        lastValue = select.value;
    });
</script>