<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <title>Frequency Generator</title>
    <link rel="stylesheet" type="text/css" href="{% static 'portrait_generator/result.css' %}">
</head>
<body>

<p>
    <label for="gene_textarea">Gene: </label>
    <br>
    <textarea disabled id="gene_textarea" rows="2" style="white-space: nowrap; width: 100%; overflow-y: hidden; resize: none;">{{ gene }}</textarea>
</p>
<p>Depth: {{ depth }}</p>
<p>Size: {{ size }}</p>
<div id="container">
    <div class="container">

    </div>
    <div class="container">

    </div>
</div>

</body>
</html>

<script type="text/javascript">
    function addImage(image, mod, remainder, containers) {
        var node = document.createElement("DIV");
        node.className = "img";
        var img = document.createElement("IMG");
        node.appendChild(img);
        img.setAttribute("src", "data:image/png;base64," + image);
        containers[0].appendChild(node);

        node = document.createElement("DIV");
        node.className = "img";
        var description = document.createElement("P");
        node.appendChild(description);
        description.appendChild(document.createTextNode("mod(" + mod + "); remainder(" + remainder + ")"));
        description.setAttribute("style", "text-align: center;");
        containers[1].appendChild(node);
    }

    function addSign(s, containers) {
        var sign = document.createElement("B");
        sign.className = "img";
        sign.appendChild(document.createTextNode(s));
        containers[0].appendChild(sign);

        var emptyDiv = document.createElement("DIV");
        emptyDiv.className = "img";
        containers[1].appendChild(emptyDiv);
    }

    var containers = document.getElementsByClassName("container");
    var flag = false;
    {% for image, mod, rem in generated_images %}
        if (flag == true) {
            addSign("+", containers);
        }
        addImage("{{ image }}", "{{ mod }}", "{{ rem }}", containers);
        flag = true;
    {% endfor %}

    {% if gene_10 is not None %}
        addSign("=", containers);
        addImage("{{ gene_10 }}", 1, 0, containers);
    {% endif %}

</script>